<!DOCTYPE html>
<html>
<head>
    <meta charset='utf-8'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <title>「初学者向」使用Python处理重复工作，解放工作量【上】 - PRELUDE</title>
    <meta name='viewport' content='width=device-width, initial-scale=1'>
    <link rel='stylesheet' type='text/css' media='screen' href='../style/basic_styles.css'>
    <link rel="stylesheet" href="https://unpkg.com/simpledotcss/simple.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.5.0/highlight.min.js"></script>
    <script>hljs.highlightAll();</script>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src=https://www.googletagmanager.com/gtag/js?id=UA-92314993-3></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'UA-92314993-3');
    </script>
    <script>
        const page_object = {"contents": [{"children": null, "text": [{"annotations": "", "color": "default", "content": "\u6700\u8fd1\u9700\u8981\u5728\u5de5\u4f5c\u4e2d\u91cd\u590d\u52b3\u52a8\u4e00\u4e9b\u8017\u65f6\u4e14\u7ec6\u788e\u7684\u5de5\u4f5c\uff0c\u5199\u4e86\u4e2a\u811a\u672c\u89e3\u653e\u5de5\u4f5c\u65f6\u95f4\uff0c\u8bb0\u5f55\u4e0b\u6574\u4e2a\u6d41\u7a0b\u3002", "link": null, "type": "text"}], "type": "paragraph"}, {"children": null, "id": "b04f11c4-26f3-44d9-ae4b-a9a098cba249", "text": [{"annotations": " bold", "color": "default", "content": "1. \u8d77\u56e0", "link": null, "type": "text"}], "type": "heading_1"}, {"children": null, "text": [{"annotations": "", "color": "default", "content": "\u6700\u8fd1\u9700\u8981\u5728\u516c\u53f8\u5185\u90e8\u7cfb\u7edf\u4e0a\u91cd\u590d\u63d0\u4ea4\u51e0\u767e\u4e2a\u4efb\u52a1\uff0c\u8fd9\u9879\u5de5\u4f5c\u5176\u5b9e\u5e76\u4e0d\u590d\u6742\uff0c\u95ee\u9898\u5728\u4e8e\u6bcf\u6267\u884c\u4e00\u6b21\u64cd\u4f5c\u9700\u8981\u8017\u65f62\u5206\u949f\uff0c\u51e0\u767e\u4e2a\u4efb\u52a1\u5c31\u662f\u4e00\u4e0b\u5348\u7684\u65f6\u95f4\u5c31\u6ca1\u4e86\uff0c\u800c\u4e14\u8fd8\u5bb9\u6613\u51fa\u9519\uff0c\u9700\u8981\u628a\u8fd9\u90e8\u5206\u5de5\u4f5c\u91cf\u89e3\u653e\u51fa\u6765\uff0c\u8ba9python\u66ff\u6211\u5b8c\u6210\u3002", "link": null, "type": "text"}], "type": "paragraph"}, {"children": null, "id": "e70abc3a-f13f-472a-a1f1-ff8c9360a407", "text": [{"annotations": " bold", "color": "default", "content": "2. \u4efb\u52a1\u6982\u8ff0", "link": null, "type": "text"}], "type": "heading_1"}, {"children": null, "text": [{"annotations": "", "color": "default", "content": "\u6211\u53f8\u5185\u90e8\u7cfb\u7edf\u662f\u57fa\u4e8eweb\u7684\uff0c\u6211\u73b0\u5728\u9700\u8981\u5728gui\u4e0a\u64cd\u4f5c\u53bb\u6dfb\u52a0\u4efb\u52a1\uff0c\u8fd9\u4e2a\u4efb\u52a1\u662f\u4ece\u4e00\u4e2a\u5185\u90e8ftp\u4e0a\u7684\uff0c\u4ee5\u65e5\u671f\u547d\u540d\u7684\u76ee\u5f55\u4e2d\u53d6\u8be5\u76ee\u5f55\u4e0b\u7684\u6240\u6709\u6587\u4ef6\uff0c\u90a3\u4e48\u6211\u5728web gui\u4e0a\u5c31\u9700\u8981\u586b\u5199\uff1a", "link": null, "type": "text"}], "type": "paragraph"}, {"items": [{"children": null, "listItems": [[{"annotations": "", "color": "default", "content": "\u4efb\u52a1\u6807\u9898", "link": null, "type": "text"}]], "type": "bulleted_list_item"}, {"children": null, "listItems": [[{"annotations": "", "color": "default", "content": "\u4efb\u52a1\u63cf\u8ff0", "link": null, "type": "text"}]], "type": "bulleted_list_item"}, {"children": null, "listItems": [[{"annotations": "", "color": "default", "content": "ftp\u4fe1\u606f\uff08\u5730\u5740\uff0c\u7aef\u53e3\uff0c\u7c7b\u578b\uff0c\u8d26\u53f7\uff0c\u5bc6\u7801\uff09", "link": null, "type": "text"}]], "type": "bulleted_list_item"}, {"children": null, "listItems": [[{"annotations": "", "color": "default", "content": "\u8def\u5f84\n\u6dfb\u52a0\u5b8c\u6210\u4efb\u52a1\u4e4b\u540e\uff0c\u6211\u9700\u8981\u6bcf2\u5206\u949f\u542f\u52a8\u4e00\u4e2a\u4efb\u52a1\uff0c\u56e0\u4e3a\u5982\u679c\u4e00\u6b21\u6027\u5f00\u542f\u6240\u6709\u4efb\u52a1\uff0c\u540e\u7aef\u53ef\u80fd\u4f1a\u5d29\u3002", "link": null, "type": "text"}]], "type": "bulleted_list_item"}], "origin_type": "bulleted_list_item", "type": "bulleted_list_item_group"}, {"children": null, "text": [{"annotations": "", "color": "default", "content": "\u6240\u4ee5\u6211\u9700\u8981\u5b9e\u73b0\u7684\u529f\u80fd\u5982\u4e0b\uff1a", "link": null, "type": "text"}], "type": "paragraph"}, {"items": [{"children": null, "listItems": [[{"annotations": "", "color": "default", "content": "\u5728\u8fdb\u5165\u7a0b\u5e8f\u540e\u8f93\u5165\u5217\u8868ID\u548ctoken\uff0c\u53ef\u4ee5\u81ea\u52a8\u83b7\u53d6\u6240\u9700\u8981\u7684json\uff1b", "link": null, "type": "text"}]], "type": "bulleted_list_item"}, {"children": null, "listItems": [[{"annotations": "", "color": "default", "content": "\u4e4b\u540e\u5faa\u73af\u8f93\u5165\u4efb\u52a1\u540d\u79f0\u548cftp\u8def\u5f84\uff0c\u5373\u53ef\u81ea\u52a8\u6dfb\u52a0\u4efb\u52a1\uff1b", "link": null, "type": "text"}]], "type": "bulleted_list_item"}, {"children": null, "listItems": [[{"annotations": "", "color": "default", "content": "\u6240\u6709\u4efb\u52a1\u6dfb\u52a0\u5b8c\u6210\u4e4b\u540e\uff0c\u6bcf2\u5206\u949f\u81ea\u52a8\u542f\u52a8\u4e00\u4e2a\u4efb\u52a1\u3002", "link": null, "type": "text"}]], "type": "bulleted_list_item"}], "origin_type": "bulleted_list_item", "type": "bulleted_list_item_group"}, {"children": null, "id": "e2b5ced5-53c3-4f44-a7d1-aaafe70019f0", "text": [{"annotations": " bold", "color": "default", "content": "3. \u89c2\u5bdf", "link": null, "type": "text"}], "type": "heading_1"}, {"children": null, "text": [{"annotations": "", "color": "default", "content": "\u6d4f\u89c8\u5668\u4e2d\u6253\u5f00\u63a7\u5236\u53f0\u7684\u7f51\u7edc\u76d1\u63a7\uff0c\u7136\u540e\u5c1d\u8bd5\u6dfb\u52a0\u4e00\u4e2a\u4efb\u52a1\uff0c\u4f1a\u770b\u5230\u4ee5\u4e0b\u884c\u4e3a\uff1a", "link": null, "type": "text"}], "type": "paragraph"}, {"items": [{"children": null, "listItems": [[{"annotations": "", "color": "default", "content": "\u6253\u5f00\u6dfb\u52a0\u4efb\u52a1\u9875\uff0c\u4f1a\u5148\u770b\u5230\u5411\u67d0\u4e2aurl\u53d1\u9001\u4e86get\u8bf7\u6c42\uff0curl\u7684\u6700\u540e\u4e00\u4e2a\u53c2\u6570\u662f\u8be5\u4efb\u52a1\u5217\u8868\u7684\u5217\u8868ID\uff0c\u5f97\u5230\u4e00\u4e2ajson\uff0c\u8be5json\u5305\u542b\u8be5\u4efb\u52a1\u5217\u8868\u7684\u4fe1\u606f\u548c\u5217\u8868\u4e0b\u6240\u6709\u4efb\u52a1\u7684\u4fe1\u606f\uff1b", "link": null, "type": "text"}]], "type": "numbered_list_item"}, {"children": null, "listItems": [[{"annotations": "", "color": "default", "content": "\u586b\u5199\u5b8c\u6210\u4fe1\u606f\u4e4b\u540e\u70b9\u51fb\u201c\u63d0\u4ea4\u201d\uff0c\u770b\u5230\u5411\u4e0a\u8ff0url\u53d1\u9001\u4e86\u4e2aput\u8bf7\u6c42\uff0c\u8bf7\u6c42\u4f53\u662f\u4e2ajson\u3002", "link": null, "type": "text"}]], "type": "numbered_list_item"}], "origin_type": "numbered_list_item", "type": "numbered_list_item_group"}, {"children": null, "text": [{"annotations": "", "color": "default", "content": "\u628a\u4e0a\u8ff0\u7684\u4e24\u4e2ajson\u653e\u5230json compare\u5de5\u5177\u4e2d\u770b\u4e0b\uff0c\u53d1\u73b0\u7b2c2\u6b65\u4e2dput\u8fc7\u53bb\u7684json\uff0c\u5c31\u662f\u7b2c1\u6b65\u7684json\u7684\u7f29\u7565\u7248\uff0c\u4f46\u662f\u5305\u542b\u4e86\u4e2a\u65b0\u7684object\uff0c\u8fd9\u4e2aobject\u4e2d\u7684\u5185\u5bb9\u5c31\u662f\u586b\u5199\u7684\u4efb\u52a1\u6807\u9898\u3001ID\u7b49\u7b49\u4fe1\u606f\u3002", "link": null, "type": "text"}], "type": "paragraph"}, {"children": null, "text": [{"annotations": "", "color": "default", "content": "\u7136\u540e\u542f\u52a8\u4e2a\u4efb\u52a1\u770b\u770b\uff1a", "link": null, "type": "text"}], "type": "paragraph"}, {"items": [{"children": null, "listItems": [[{"annotations": "", "color": "default", "content": "\u70b9\u51fb\u201c\u5f00\u59cb\u4efb\u52a1\u201d\uff0c\u53d1\u73b0\u5411\u67d0\u4e2aurl\u53d1\u9001\u4e86post\u8bf7\u6c42\uff0curl\u4e2d\u53c2\u6570\u5305\u542b\u8be5\u4efb\u52a1ID\u3002", "link": null, "type": "text"}]], "type": "numbered_list_item"}], "origin_type": "numbered_list_item", "type": "numbered_list_item_group"}, {"children": null, "text": [{"annotations": "", "color": "default", "content": "\u9a8c\u8bc1\u65b9\u5f0f\u4e0a\uff0c\u54a8\u8be2\u6211\u53f8\u5de5\u7a0b\u5e08\u4e4b\u540e\u5f97\u77e5\uff0c\u53ea\u9700\u8981\u5728\u8bf7\u6c42\u5934\u4e2d\u5305\u542btoken\u5373\u53ef\u3002\n\u90a3\u6d41\u7a0b\u548c\u5185\u5bb9\u5c31\u5f88\u6e05\u6670\u4e86\uff0c\u63a5\u4e0b\u6765\u7528\u4ee3\u7801\u5b9e\u73b0\u5c31\u884c\u4e86\u3002", "link": null, "type": "text"}], "type": "paragraph"}, {"children": null, "id": "a1a281b9-0165-4c6b-93ff-b74d5978613f", "text": [{"annotations": " bold", "color": "default", "content": "4. \u5b9e\u73b0\u8fc7\u7a0b - \u4efb\u52a1\u6279\u91cf\u6dfb\u52a0\u5668", "link": null, "type": "text"}], "type": "heading_1"}, {"children": null, "text": [{"annotations": "", "color": "default", "content": "\u7531\u4e8e\u662f\u628a\u6240\u6709\u4efb\u52a1\u6dfb\u52a0\u5b8c\u6210\u4e4b\u540e\u518d\u4e00\u4e2a\u4e2a\u542f\u52a8\u4efb\u52a1\uff0c\u6240\u4ee5\u811a\u672c\u5206\u4e24\u4e2a\u5199\u3002\n\u672c\u7bc7\u5148\u5199\u4efb\u52a1\u6dfb\u52a0\u811a\u672c\u3002", "link": null, "type": "text"}], "type": "paragraph"}, {"children": null, "id": "64361a34-82a8-46b9-9070-13e232d6429b", "text": [{"annotations": "", "color": "default", "content": "A. \u89c4\u5212", "link": null, "type": "text"}], "type": "heading_2"}, {"children": null, "text": [{"annotations": "", "color": "default", "content": "\u5904\u7406\u7f51\u7edc\u8bf7\u6c42\u90a3\u80af\u5b9a\u5c31\u662f\u7528requests\u5e93\u6ca1\u8dd1\u4e86\uff0c\u800c\u4e14\u9700\u8981\u5904\u7406json\uff0c\u90a3\u4e5f\u5148\u628aJson\u5e93\u5f15\u5165\u8fdb\u6765\u3002\u5148\u628a\u7a0b\u5e8f\u7ed3\u6784\u5199\u51fa\u6765\uff1a", "link": null, "type": "text"}], "type": "paragraph"}, {"children": null, "contents": "import requests\nimport json\n\nif __name__ == \"__main__\":\n    # \u4e3b\u4f53\u7ed3\u6784\u5728\u8fd9\u91cc", "language": "language-python", "type": "code"}, {"children": null, "text": [{"annotations": "", "color": "default", "content": "\u5148\u89c4\u5212\u4e00\u4e0b\u6d41\u7a0b\u548c\u51fd\u6570\uff1a", "link": null, "type": "text"}], "type": "paragraph"}, {"items": [{"children": null, "listItems": [[{"annotations": "", "color": "default", "content": "\u8fdb\u5165\u7a0b\u5e8f\u4e4b\u540e\u5148\u624b\u52a8\u8f93\u5165token\u548c\u5217\u8868ID\uff0c\u56e0\u4e3a\u8fd9\u4e24\u4e2a\u4e1c\u897f\u662f\u5728get\u5217\u8868\u7684\u65f6\u5019\u9700\u8981\u7684\u5185\u5bb9\uff0c\u4e00\u6b21\u8f93\u5165\u8fd0\u884c\u65f6\u53ef\u7528\uff0c\u540e\u7eed\u4e0d\u7528\u91cd\u590d\u8f93\u5165\uff1b", "link": null, "type": "text"}]], "type": "numbered_list_item"}, {"children": null, "listItems": [[{"annotations": "", "color": "default", "content": "\u7528\u4e0a\u9762\u7684\u4fe1\u606f\u53bbget\u5217\u8868\uff0c\u5982\u679c\u6210\u529f\u7684\u8bdd\uff1a", "link": null, "type": "text"}]], "type": "numbered_list_item"}, {"children": null, "listItems": [[{"annotations": "", "color": "default", "content": "\u5220\u9664json\u4e2d\u4e0d\u5fc5\u8981\u7684\u4fe1\u606f\uff1b", "link": null, "type": "text"}]], "type": "numbered_list_item"}, {"children": null, "listItems": [[{"annotations": "", "color": "default", "content": "\u624b\u52a8\u8f93\u5165\u4efb\u52a1\u540d\u79f0\u548cftp\u8def\u5f84\uff1b", "link": null, "type": "text"}]], "type": "numbered_list_item"}, {"children": null, "listItems": [[{"annotations": "", "color": "default", "content": "\u628a3\u548c4\u7684\u5185\u5bb9\u4f20\u7ed9\u4efb\u52a1\u6dfb\u52a0\u51fd\u6570\uff1b", "link": null, "type": "text"}]], "type": "numbered_list_item"}, {"children": null, "listItems": [[{"annotations": "", "color": "default", "content": "\u91cd\u590d3 4 5\u3002", "link": null, "type": "text"}]], "type": "numbered_list_item"}], "origin_type": "numbered_list_item", "type": "numbered_list_item_group"}, {"children": null, "id": "f63a7adc-17a2-4caa-9104-d8b79fdd8d6b", "text": [{"annotations": " bold", "color": "default", "content": "B. \u5217\u8868\u83b7\u53d6\u51fd\u6570", "link": null, "type": "text"}], "type": "heading_2"}, {"children": null, "text": [{"annotations": "", "color": "default", "content": "\u7136\u540e\u6765\u5b9e\u73b0\u7b2c1\u6b65\uff0c\u5148get\u4efb\u52a1\u5217\u8868\uff0c\u5199\u4e00\u4e2a\u51fd\u6570\uff1a", "link": null, "type": "text"}], "type": "paragraph"}, {"children": null, "contents": "def listgetter(auth, requrl):\n    headers = {\"Content-Type\":\"application/json\",\"Authorization\":auth}\n    # \u5b9e\u4f8burl\u4e3a\uff1ahttps://example.com/api/data_sources/task_list_id\n    r = requests.get(requrl, headers=headers)\n    return r.text", "language": "language-python", "type": "code"}, {"children": null, "text": [{"annotations": "", "color": "default", "content": "\u8fd9\u4e2a\u51fd\u6570\u6709\u4e09\u4e2a\u4f5c\u7528\uff1a", "link": null, "type": "text"}], "type": "paragraph"}, {"items": [{"children": null, "listItems": [[{"annotations": "", "color": "default", "content": "\u4f1a\u63a5\u6536\u4e24\u4e2a\u53c2\u6570\uff0c\u8fd9\u4e24\u4e2a\u53c2\u6570\u9700\u8981\u7528\u6237\uff08\u4e5f\u5c31\u662f\u6211\uff09\u5728\u8fdb\u5165\u7a0b\u5e8f\u4e4b\u540e\u624b\u52a8\u8f93\u5165\uff0c\u4e00\u4e2a\u662ftoken\uff0c\u4e00\u4e2a\u662f\u8bf7\u6c42\u5730\u5740\uff0c\u4f46\u662f\u7531\u4e8e\u8bf7\u6c42\u5730\u5740\u53d8\u5316\u7684\u53ea\u662f\u6700\u540e\u4e00\u4e2aurl\u4e2d\u7684\u53c2\u6570\uff0c\u6240\u4ee5\u5176\u5b9e\u53ea\u9700\u8981\u624b\u52a8\u8f93\u5165\u8fd9\u4e2a\u53c2\u6570\u5c31\u884c\uff0c\u7136\u540e\u5728\u4e3b\u6d41\u7a0b\u4e2d\u62fc\u63a5\u4e00\u4e2aurl\u51fa\u6765\uff0c\u4f5c\u4e3a\u53c2\u6570\u7ed9\u5230\u8fd9\u4e2a\u51fd\u6570\uff1b", "link": null, "type": "text"}]], "type": "numbered_list_item"}, {"children": null, "listItems": [[{"annotations": "", "color": "default", "content": "\u7136\u540e\u7528requests\u5e26headers\u8bf7\u6c42\u4e00\u4e2aget\uff0c\u5177\u4f53\u6587\u6863\u53ef\u4ee5\u770b", "link": null, "type": "text"}, {"annotations": "", "color": "default", "content": " \u8fd9\u91cc ", "link": "https://2.python-requests.org/en/v2.0-0/", "type": "text"}, {"annotations": "", "color": "default", "content": "\uff1b", "link": null, "type": "text"}]], "type": "numbered_list_item"}, {"children": null, "listItems": [[{"annotations": "", "color": "default", "content": "\u628aget\u7684\u7ed3\u679c\u8fd4\u56de\u51fa\u6765\u3002", "link": null, "type": "text"}]], "type": "numbered_list_item"}], "origin_type": "numbered_list_item", "type": "numbered_list_item_group"}, {"children": null, "id": "51c1a022-2cf0-42a3-978c-ed51f5794ba0", "text": [{"annotations": " bold", "color": "default", "content": "C. json\u5904\u7406\u51fd\u6570", "link": null, "type": "text"}], "type": "heading_2"}, {"children": null, "text": [{"annotations": "", "color": "default", "content": "\u83b7\u53d6\u5230json\u4e4b\u540e\uff0c\u4e5f\u5c31\u662f\u6536\u5230listgetter()\u51fd\u6570\u7684\u8fd4\u56de\u7ed3\u679c\u4e4b\u540e\uff0c \u8981\u5bf9\u7ed3\u679c\u8fdb\u884c\u88c1\u5207\uff0c\u90a3\u518d\u5199\u4e00\u4e2a\u51fd\u6570\u8fdb\u884cjson\u88c1\u5207\uff1a", "link": null, "type": "text"}], "type": "paragraph"}, {"children": null, "contents": "def tailor(content):\n        gd = json.loads(content)\n        del gd[\u0027created_at\u0027]\n        del gd[\u0027user_id\u0027]\n        del gd[\u0027group\u0027]\n        del gd[\u0027group_id\u0027]\n        del gd[\u0027logo\u0027]\n        del gd[\u0027name\u0027]\n        del gd[\u0027updated_at\u0027]\n        del gd[\u0027desc\u0027]\n        return gd", "language": "language-python", "type": "code"}, {"children": null, "text": [{"annotations": "", "color": "default", "content": "\u8fd9\u4e2a\u51fd\u6570\u6709\u56db\u4e2a\u4f5c\u7528\uff1a", "link": null, "type": "text"}], "type": "paragraph"}, {"items": [{"children": null, "listItems": [[{"annotations": "", "color": "default", "content": "\u63a5\u53d7get\u5230\u7684json\uff0c\u6b64\u65f6\u4e3a\u4e00\u4e2a\u5b57\u7b26\u4e32\uff1b", "link": null, "type": "text"}]], "type": "numbered_list_item"}, {"children": null, "listItems": [[{"annotations": "", "color": "default", "content": "\u7528json.loads\u65b9\u6cd5\u5c06json\u5b57\u7b26\u4e32\u89e3\u6790\u4e3adict\uff1b", "link": null, "type": "text"}]], "type": "numbered_list_item"}, {"children": null, "listItems": [[{"annotations": "", "color": "default", "content": "\u5220\u9664\u4e0d\u9700\u8981\u7684\u5bf9\u8c61\uff1b", "link": null, "type": "text"}]], "type": "numbered_list_item"}, {"children": null, "listItems": [[{"annotations": "", "color": "default", "content": "\u8fd4\u56de\u5220\u9664\u540e\u7684dict\u3002", "link": null, "type": "text"}]], "type": "numbered_list_item"}], "origin_type": "numbered_list_item", "type": "numbered_list_item_group"}, {"children": null, "id": "2942ebfc-d84d-45c1-b529-55acd3c8d98b", "text": [{"annotations": " bold", "color": "default", "content": "D. \u4efb\u52a1json\u751f\u6210\u51fd\u6570", "link": null, "type": "text"}], "type": "heading_2"}, {"children": null, "text": [{"annotations": "", "color": "default", "content": "\u83b7\u53d6\u5230\u5904\u7406\u8fc7\u540e\u7684json dict\u4e4b\u540e\uff0c\u5c31\u9700\u8981\u5728\u6307\u5b9a\u7684\u5bf9\u8c61\u4e2d\u5047\u5982\u6211\u4eec\u9700\u8981\u63d0\u4ea4\u7684\u4efb\u52a1\u7684\u4fe1\u606f\uff0c\u8fd9\u6837\u6dfb\u52a0\u5b8c\u7684\u6700\u7ec8\u7ed3\u679c\u5c31\u662f\u9700\u8981\u5728\u6700\u540e\u4e00\u6b65put\u7684json\u3002\n\u88c1\u526a\u8fc7\u540e\u7684json\u5927\u6982\u662f\u8fd9\u6837\uff1a", "link": null, "type": "text"}], "type": "paragraph"}, {"children": null, "contents": "{\n\"elementA\":\"elementa\",\n\"elementB\":\"elementb\",\n\"tasks\":{\n\"task1ID\":{\n\"id\": \"\u4efb\u52a1ID\", \n\"desc\": \"\", \n\"host\": \"ip\u5730\u5740\", \n\"port\": \"1024\", \n\"status\": \"\", \n\"password\": \"\u5bc6\u7801\", \n\"taskname\": \"\u4efb\u52a1\u540d\", \n\"username\": \"\u767b\u9646\u7528\u6237\u540d\", \n\"createdAt\": \"\u65e5\u671f\", \n\"updatedAt\": \"\u65e5\u671f\", \n\"remotepath\": \"ftp\u8def\u5f84\", \n\"compressionmode\": \"targz\"}\n}\n}", "language": "language-json", "type": "code"}, {"children": null, "text": [{"annotations": "", "color": "default", "content": "\u5176\u4e2dtasks\u4e2d\u7684\u6bcf\u4e00\u4e2aobject\u5373\u662f\u4e00\u4e2a\u4efb\u52a1\uff0c\u6240\u4ee5\u5c31\u9700\u8981\u5728tasks\u4e2d\u6dfb\u52a0object\uff0c\u4e4b\u540eput\u5b8c\u6574\u7684json\u5373\u53ef\u6dfb\u52a0\u4e00\u4e2a\u4efb\u52a1\u3002\n\u90a3\u4e48\u51fd\u6570\u5982\u4e0b\uff1a", "link": null, "type": "text"}], "type": "paragraph"}, {"children": null, "contents": "def idgen():\n    rdm = \u0027\u0027.join(random.sample(string.ascii_uppercase + string.digits, 24))\n    return \"AA\" + rdm\n\ndef taskadder(content, taskname):   # 1\n    newid = idgen()                 # 2\n    created_at = time.strftime(\"%Y-%m-%dT%H:%M:%S.000Z\", time.localtime())\n    remote_path = \"/path/to/\" + taskname + \"/*.tar.gz\"\n    \n    newtask = {\u0027id\u0027: newid, \u0027desc\u0027: \u0027\u0027, \u0027host\u0027: \u0027ip\u5730\u5740\u0027, \u0027port\u0027: \u00271024\u0027, \u0027status\u0027: \u0027\u0027, \u0027password\u0027: \u0027\u5bc6\u7801\u0027, \u0027taskname\u0027: taskname, \u0027username\u0027: \u0027\u767b\u9646\u7528\u6237\u540d\u0027, \u0027createdAt\u0027: created_at, \u0027updatedAt\u0027: created_at, \u0027remotepath\u0027: [remote_path], \u0027compressionmode\u0027: \u0027targz\u0027} # 3\n\n    content[\u0027tasks\u0027][newid] = newtask #4\n    return content #5", "language": "language-python", "type": "code"}, {"children": null, "text": [{"annotations": "", "color": "default", "content": "\u89e3\u91ca\uff1a", "link": null, "type": "text"}], "type": "paragraph"}, {"items": [{"children": null, "listItems": [[{"annotations": "", "color": "default", "content": "\u8fd9\u4e2a\u51fd\u6570\u63a5\u6536\u4e24\u4e2a\u53c2\u6570\uff0c", "link": null, "type": "text"}, {"annotations": " code", "color": "default", "content": "content", "link": null, "type": "text"}, {"annotations": "", "color": "default", "content": "\u662fC\u4e2d\u8fd4\u56de\u7684\u88c1\u526a\u8fc7\u7684json\uff0c", "link": null, "type": "text"}, {"annotations": " code", "color": "default", "content": "taskname", "link": null, "type": "text"}, {"annotations": "", "color": "default", "content": "\u8fd9\u91cc\u5077\u4e86\u4e2a\u61d2\uff0c\u56e0\u4e3a\u9664\u4e86\u4efb\u52a1\u540d\u4e4b\u5916\u6211\u8fd8\u9700\u8981\u624b\u52a8\u8f93\u5165ftp\u8def\u5f84\u4e2d\u7684\u53d8\u91cf\u90e8\u5206\uff0c\u5c31\u662fftp\u8def\u5f84\u4e2d\u7684\u65e5\u671f\u90e8\u5206\uff08\u56e0\u4e3a\u6bcf\u5929\u4f1a\u6709\u4e00\u4e2a\u4ee5\u5f53\u65e5\u65e5\u671f\u547d\u540d\u7684\u76ee\u5f55\uff09\uff0c\u90a3\u6211\u5e72\u8106\u5c31\u628ataskname\u548c\u65e5\u671f\u90e8\u5206\u8f93\u5165\u6210\u4e00\u6837\u7684\uff0c\u90a3\u5c31\u53ef\u4ee5\u5c11\u8f93\u5165\u4e00\u6b21\u4e86\uff1b", "link": null, "type": "text"}]], "type": "numbered_list_item"}, {"children": null, "listItems": [[{"annotations": "", "color": "default", "content": "\u4e0a\u9762\u7684json\u4e2d\u7684\u201c\u4efb\u52a1ID\u201d\uff0c\u5728\u54a8\u8be2\u5de5\u7a0b\u5e08\u4e4b\u540e\u544a\u77e5\u5176\u5b9e\u662f\u751f\u6210\u7684\u968f\u673a\u5b57\u7b26\u4e32\uff0c\u6240\u4ee5\u5c31\u5199\u4e2a\u51fd\u6570\u7528\u6765\u751f\u6210\u5b57\u7b26\u4e32\u3002\u4e3a\u4e86\u548c\u5176\u4ed6\u4efb\u52a1\u533a\u5206\uff0c\u4f7f\u7528AA\u5f00\u5934\u8868\u793a\u662f\u6211\u4f7f\u7528\u811a\u672c\u751f\u6210\u7684\u4efb\u52a1\uff1b", "link": null, "type": "text"}]], "type": "numbered_list_item"}, {"children": null, "listItems": [[{"annotations": "", "color": "default", "content": "\u8fd9\u4e00\u4e32\u5c31\u662f\u5b9e\u9645\u65b0\u589e\u4efb\u52a1\uff0c\u7b49\u4f1a\u9700\u8981\u52a0\u5230json\u91cc\u9762\u7684object\uff1b", "link": null, "type": "text"}]], "type": "numbered_list_item"}, {"children": null, "listItems": [[{"annotations": "", "color": "default", "content": "\u5f80\u8fd9\u4e2adict\u91cc\u9762\u63d2\u5165\u8fd9\u4e2a\u65b0\u4efb\u52a1\uff1b", "link": null, "type": "text"}]], "type": "numbered_list_item"}, {"children": null, "listItems": [[{"annotations": "", "color": "default", "content": "\u8fd4\u56de\u8fd9\u4e2adict\u3002", "link": null, "type": "text"}]], "type": "numbered_list_item"}], "origin_type": "numbered_list_item", "type": "numbered_list_item_group"}, {"children": null, "id": "99ab6a1d-a0c2-4dad-a634-e60b8edb265e", "text": [{"annotations": " bold", "color": "default", "content": "E. \u4efb\u52a1\u63d0\u4ea4\u51fd\u6570", "link": null, "type": "text"}], "type": "heading_2"}, {"children": null, "contents": "def taskputter(content, auth, requrl):\n    headers = {\"Content-Type\":\"application/json\",\"Authorization\":\"token\"}\n    # \u5b9e\u4f8burl\u4e3a\uff1ahttps://example.com/api/data_sources/task_list_id\n    p = requests.put(requrl,headers=headers, data=json.dumps(content) )\n    return p", "language": "language-python", "type": "code"}, {"children": null, "text": [{"annotations": "", "color": "default", "content": "\u8fd9\u4e2a\u4e2aB\u5927\u540c\u5c0f\u5f02\uff0c\u5c31\u662f\u591a\u4e86\u4e2acontent\uff0c\u8fd9\u4e2acontent\u5c31\u662fD\u5904\u7406\u5b8c\u6210\u4e4b\u540e\u8fd4\u56de\u7684\u90a3\u4e2adict\u3002", "link": null, "type": "text"}], "type": "paragraph"}, {"children": null, "id": "ac479074-ccd4-4d53-9f62-19e4e1b3022b", "text": [{"annotations": " bold", "color": "default", "content": "F. \u4e3b\u6d41\u7a0b", "link": null, "type": "text"}], "type": "heading_2"}, {"children": null, "text": [{"annotations": "", "color": "default", "content": "\u51fd\u6570\u90fd\u5199\u597d\u4e86\u4e4b\u540e\u628a\u4e3b\u6d41\u7a0b\u5199\u5230\u4e3b\u4f53\u7ed3\u6784\u4e2d\uff1a", "link": null, "type": "text"}], "type": "paragraph"}, {"children": null, "contents": "if __name__ == \"__main__\":\n    token  = input(\"token?\")         #\u7528\u6237\u8f93\u5165token\n    url = input(\"request url?\")  #\u7528\u6237\u8f93\u5165\u8bf7\u6c42\u5730\u5740\n\n    for i in range(0,1000):         #\u56e0\u4e3a\u8981\u8ba9\u4e0b\u9762\u7684\u90e8\u5206\u5faa\u73af\uff0c\u6240\u4ee5\u5c31\u5faa\u73af1000\u6b21\n        tname = input(\"task name / path?\") #\u8f93\u5165\u4efb\u52a1\u540d\uff0c\u5176\u5b9e\u4e5f\u662f\u8def\u5f84\n        g = listgetter(token, url)\n        t = tailor(g)\n        a = taskadder(t, tname)\n        r = taskputter(a, token, url)", "language": "language-python", "type": "code"}, {"children": null, "text": [{"annotations": "", "color": "default", "content": "\u5b8c\u6210\u3002", "link": null, "type": "text"}], "type": "paragraph"}], "cover": {"type": "external", "url": "https://www.notion.so/images/page-cover/rijksmuseum_vermeer_the_milkmaid.jpg"}, "create_date": "2020-02-23", "create_time": "", "ga": "UA-92314993-3", "page_title": "\u300c\u521d\u5b66\u8005\u5411\u300d\u4f7f\u7528Python\u5904\u7406\u91cd\u590d\u5de5\u4f5c\uff0c\u89e3\u653e\u5de5\u4f5c\u91cf\u3010\u4e0a\u3011", "site_name": "PRELUDE"}
        console.log(page_object)
    </script>
</head>
<body>


<!-- header area -->

    <div style="position: absolute; height: 400px;width: 100%;z-index: 0;background-image: url( https://www.notion.so/images/page-cover/rijksmuseum_vermeer_the_milkmaid.jpg );background-position: center; display: flex; justify-content: center;">
  

        <div>
            
            <div class="header-article">
    <p><a href="../index.html">PRELUDE</a></p>
</div>
            
            <h1 class="page-title">「初学者向」使用Python处理重复工作，解放工作量【上】</h1>
            <i class="page-title">Create At: 2020-02-23 </i>
        </div>
    </div>


<!-- body area -->
    <div class="container" style="padding-top: 450px">
    <div>
        
        












<p>
        
        
            
<span class=" default">最近需要在工作中重复劳动一些耗时且细碎的工作，写了个脚本解放工作时间，记录下整个流程。</span>

        
        
    </p>
    





<h2 id=b04f11c4-26f3-44d9-ae4b-a9a098cba249>
        
            
<span class=" bold default">1. 起因</span>

        
    </h2>
    





<p>
        
        
            
<span class=" default">最近需要在公司内部系统上重复提交几百个任务，这项工作其实并不复杂，问题在于每执行一次操作需要耗时2分钟，几百个任务就是一下午的时间就没了，而且还容易出错，需要把这部分工作量解放出来，让python替我完成。</span>

        
        
    </p>
    





<h2 id=e70abc3a-f13f-472a-a1f1-ff8c9360a407>
        
            
<span class=" bold default">2. 任务概述</span>

        
    </h2>
    





<p>
        
        
            
<span class=" default">我司内部系统是基于web的，我现在需要在gui上操作去添加任务，这个任务是从一个内部ftp上的，以日期命名的目录中取该目录下的所有文件，那么我在web gui上就需要填写：</span>

        
        
    </p>
    





<ul>
        
            <li>
        
            
                
<span class=" default">任务标题</span>

            
        
    </li>
    
        
            <li>
        
            
                
<span class=" default">任务描述</span>

            
        
    </li>
    
        
            <li>
        
            
                
<span class=" default">ftp信息（地址，端口，类型，账号，密码）</span>

            
        
    </li>
    
        
            <li>
        
            
                
<span class=" default">路径
添加完成任务之后，我需要每2分钟启动一个任务，因为如果一次性开启所有任务，后端可能会崩。</span>

            
        
    </li>
    
        
    </ul>
    


<div style="padding-left: 20px;">



</div>




<p>
        
        
            
<span class=" default">所以我需要实现的功能如下：</span>

        
        
    </p>
    





<ul>
        
            <li>
        
            
                
<span class=" default">在进入程序后输入列表ID和token，可以自动获取所需要的json；</span>

            
        
    </li>
    
        
            <li>
        
            
                
<span class=" default">之后循环输入任务名称和ftp路径，即可自动添加任务；</span>

            
        
    </li>
    
        
            <li>
        
            
                
<span class=" default">所有任务添加完成之后，每2分钟自动启动一个任务。</span>

            
        
    </li>
    
        
    </ul>
    


<div style="padding-left: 20px;">



</div>




<h2 id=e2b5ced5-53c3-4f44-a7d1-aaafe70019f0>
        
            
<span class=" bold default">3. 观察</span>

        
    </h2>
    





<p>
        
        
            
<span class=" default">浏览器中打开控制台的网络监控，然后尝试添加一个任务，会看到以下行为：</span>

        
        
    </p>
    





<ol>
        
            <li>
        
            
                
<span class=" default">打开添加任务页，会先看到向某个url发送了get请求，url的最后一个参数是该任务列表的列表ID，得到一个json，该json包含该任务列表的信息和列表下所有任务的信息；</span>

            
        
    </li>
    
        
            <li>
        
            
                
<span class=" default">填写完成信息之后点击“提交”，看到向上述url发送了个put请求，请求体是个json。</span>

            
        
    </li>
    
        
    </ol>
    


<div style="padding-left: 20px;">



</div>




<p>
        
        
            
<span class=" default">把上述的两个json放到json compare工具中看下，发现第2步中put过去的json，就是第1步的json的缩略版，但是包含了个新的object，这个object中的内容就是填写的任务标题、ID等等信息。</span>

        
        
    </p>
    





<p>
        
        
            
<span class=" default">然后启动个任务看看：</span>

        
        
    </p>
    





<ol>
        
            <li>
        
            
                
<span class=" default">点击“开始任务”，发现向某个url发送了post请求，url中参数包含该任务ID。</span>

            
        
    </li>
    
        
    </ol>
    


<div style="padding-left: 20px;">



</div>




<p>
        
        
            
<span class=" default">验证方式上，咨询我司工程师之后得知，只需要在请求头中包含token即可。
那流程和内容就很清晰了，接下来用代码实现就行了。</span>

        
        
    </p>
    





<h2 id=a1a281b9-0165-4c6b-93ff-b74d5978613f>
        
            
<span class=" bold default">4. 实现过程 - 任务批量添加器</span>

        
    </h2>
    





<p>
        
        
            
<span class=" default">由于是把所有任务添加完成之后再一个个启动任务，所以脚本分两个写。
本篇先写任务添加脚本。</span>

        
        
    </p>
    





<h3 id=64361a34-82a8-46b9-9070-13e232d6429b>
        
            
<span class=" default">A. 规划</span>

        
    </h3>
    





<p>
        
        
            
<span class=" default">处理网络请求那肯定就是用requests库没跑了，而且需要处理json，那也先把Json库引入进来。先把程序结构写出来：</span>

        
        
    </p>
    





<pre><code class=language-python>import requests
import json

if __name__ == &#34;__main__&#34;:
    # 主体结构在这里</code></pre>
    





<p>
        
        
            
<span class=" default">先规划一下流程和函数：</span>

        
        
    </p>
    





<ol>
        
            <li>
        
            
                
<span class=" default">进入程序之后先手动输入token和列表ID，因为这两个东西是在get列表的时候需要的内容，一次输入运行时可用，后续不用重复输入；</span>

            
        
    </li>
    
        
            <li>
        
            
                
<span class=" default">用上面的信息去get列表，如果成功的话：</span>

            
        
    </li>
    
        
            <li>
        
            
                
<span class=" default">删除json中不必要的信息；</span>

            
        
    </li>
    
        
            <li>
        
            
                
<span class=" default">手动输入任务名称和ftp路径；</span>

            
        
    </li>
    
        
            <li>
        
            
                
<span class=" default">把3和4的内容传给任务添加函数；</span>

            
        
    </li>
    
        
            <li>
        
            
                
<span class=" default">重复3 4 5。</span>

            
        
    </li>
    
        
    </ol>
    


<div style="padding-left: 20px;">



</div>




<h3 id=f63a7adc-17a2-4caa-9104-d8b79fdd8d6b>
        
            
<span class=" bold default">B. 列表获取函数</span>

        
    </h3>
    





<p>
        
        
            
<span class=" default">然后来实现第1步，先get任务列表，写一个函数：</span>

        
        
    </p>
    





<pre><code class=language-python>def listgetter(auth, requrl):
    headers = {&#34;Content-Type&#34;:&#34;application/json&#34;,&#34;Authorization&#34;:auth}
    # 实例url为：https://example.com/api/data_sources/task_list_id
    r = requests.get(requrl, headers=headers)
    return r.text</code></pre>
    





<p>
        
        
            
<span class=" default">这个函数有三个作用：</span>

        
        
    </p>
    





<ol>
        
            <li>
        
            
                
<span class=" default">会接收两个参数，这两个参数需要用户（也就是我）在进入程序之后手动输入，一个是token，一个是请求地址，但是由于请求地址变化的只是最后一个url中的参数，所以其实只需要手动输入这个参数就行，然后在主流程中拼接一个url出来，作为参数给到这个函数；</span>

            
        
    </li>
    
        
            <li>
        
            
                
<span class=" default">然后用requests带headers请求一个get，具体文档可以看</span>

            
                
<a href=https://2.python-requests.org/en/v2.0-0/ class=" default"> 这里 </a>

            
                
<span class=" default">；</span>

            
        
    </li>
    
        
            <li>
        
            
                
<span class=" default">把get的结果返回出来。</span>

            
        
    </li>
    
        
    </ol>
    


<div style="padding-left: 20px;">



</div>




<h3 id=51c1a022-2cf0-42a3-978c-ed51f5794ba0>
        
            
<span class=" bold default">C. json处理函数</span>

        
    </h3>
    





<p>
        
        
            
<span class=" default">获取到json之后，也就是收到listgetter()函数的返回结果之后， 要对结果进行裁切，那再写一个函数进行json裁切：</span>

        
        
    </p>
    





<pre><code class=language-python>def tailor(content):
        gd = json.loads(content)
        del gd[&#39;created_at&#39;]
        del gd[&#39;user_id&#39;]
        del gd[&#39;group&#39;]
        del gd[&#39;group_id&#39;]
        del gd[&#39;logo&#39;]
        del gd[&#39;name&#39;]
        del gd[&#39;updated_at&#39;]
        del gd[&#39;desc&#39;]
        return gd</code></pre>
    





<p>
        
        
            
<span class=" default">这个函数有四个作用：</span>

        
        
    </p>
    





<ol>
        
            <li>
        
            
                
<span class=" default">接受get到的json，此时为一个字符串；</span>

            
        
    </li>
    
        
            <li>
        
            
                
<span class=" default">用json.loads方法将json字符串解析为dict；</span>

            
        
    </li>
    
        
            <li>
        
            
                
<span class=" default">删除不需要的对象；</span>

            
        
    </li>
    
        
            <li>
        
            
                
<span class=" default">返回删除后的dict。</span>

            
        
    </li>
    
        
    </ol>
    


<div style="padding-left: 20px;">



</div>




<h3 id=2942ebfc-d84d-45c1-b529-55acd3c8d98b>
        
            
<span class=" bold default">D. 任务json生成函数</span>

        
    </h3>
    





<p>
        
        
            
<span class=" default">获取到处理过后的json dict之后，就需要在指定的对象中假如我们需要提交的任务的信息，这样添加完的最终结果就是需要在最后一步put的json。
裁剪过后的json大概是这样：</span>

        
        
    </p>
    





<pre><code class=language-json>{
&#34;elementA&#34;:&#34;elementa&#34;,
&#34;elementB&#34;:&#34;elementb&#34;,
&#34;tasks&#34;:{
&#34;task1ID&#34;:{
&#34;id&#34;: &#34;任务ID&#34;, 
&#34;desc&#34;: &#34;&#34;, 
&#34;host&#34;: &#34;ip地址&#34;, 
&#34;port&#34;: &#34;1024&#34;, 
&#34;status&#34;: &#34;&#34;, 
&#34;password&#34;: &#34;密码&#34;, 
&#34;taskname&#34;: &#34;任务名&#34;, 
&#34;username&#34;: &#34;登陆用户名&#34;, 
&#34;createdAt&#34;: &#34;日期&#34;, 
&#34;updatedAt&#34;: &#34;日期&#34;, 
&#34;remotepath&#34;: &#34;ftp路径&#34;, 
&#34;compressionmode&#34;: &#34;targz&#34;}
}
}</code></pre>
    





<p>
        
        
            
<span class=" default">其中tasks中的每一个object即是一个任务，所以就需要在tasks中添加object，之后put完整的json即可添加一个任务。
那么函数如下：</span>

        
        
    </p>
    





<pre><code class=language-python>def idgen():
    rdm = &#39;&#39;.join(random.sample(string.ascii_uppercase + string.digits, 24))
    return &#34;AA&#34; + rdm

def taskadder(content, taskname):   # 1
    newid = idgen()                 # 2
    created_at = time.strftime(&#34;%Y-%m-%dT%H:%M:%S.000Z&#34;, time.localtime())
    remote_path = &#34;/path/to/&#34; + taskname + &#34;/*.tar.gz&#34;
    
    newtask = {&#39;id&#39;: newid, &#39;desc&#39;: &#39;&#39;, &#39;host&#39;: &#39;ip地址&#39;, &#39;port&#39;: &#39;1024&#39;, &#39;status&#39;: &#39;&#39;, &#39;password&#39;: &#39;密码&#39;, &#39;taskname&#39;: taskname, &#39;username&#39;: &#39;登陆用户名&#39;, &#39;createdAt&#39;: created_at, &#39;updatedAt&#39;: created_at, &#39;remotepath&#39;: [remote_path], &#39;compressionmode&#39;: &#39;targz&#39;} # 3

    content[&#39;tasks&#39;][newid] = newtask #4
    return content #5</code></pre>
    





<p>
        
        
            
<span class=" default">解释：</span>

        
        
    </p>
    





<ol>
        
            <li>
        
            
                
<span class=" default">这个函数接收两个参数，</span>

            
                
<span class=" code default">content</span>

            
                
<span class=" default">是C中返回的裁剪过的json，</span>

            
                
<span class=" code default">taskname</span>

            
                
<span class=" default">这里偷了个懒，因为除了任务名之外我还需要手动输入ftp路径中的变量部分，就是ftp路径中的日期部分（因为每天会有一个以当日日期命名的目录），那我干脆就把taskname和日期部分输入成一样的，那就可以少输入一次了；</span>

            
        
    </li>
    
        
            <li>
        
            
                
<span class=" default">上面的json中的“任务ID”，在咨询工程师之后告知其实是生成的随机字符串，所以就写个函数用来生成字符串。为了和其他任务区分，使用AA开头表示是我使用脚本生成的任务；</span>

            
        
    </li>
    
        
            <li>
        
            
                
<span class=" default">这一串就是实际新增任务，等会需要加到json里面的object；</span>

            
        
    </li>
    
        
            <li>
        
            
                
<span class=" default">往这个dict里面插入这个新任务；</span>

            
        
    </li>
    
        
            <li>
        
            
                
<span class=" default">返回这个dict。</span>

            
        
    </li>
    
        
    </ol>
    


<div style="padding-left: 20px;">



</div>




<h3 id=99ab6a1d-a0c2-4dad-a634-e60b8edb265e>
        
            
<span class=" bold default">E. 任务提交函数</span>

        
    </h3>
    





<pre><code class=language-python>def taskputter(content, auth, requrl):
    headers = {&#34;Content-Type&#34;:&#34;application/json&#34;,&#34;Authorization&#34;:&#34;token&#34;}
    # 实例url为：https://example.com/api/data_sources/task_list_id
    p = requests.put(requrl,headers=headers, data=json.dumps(content) )
    return p</code></pre>
    





<p>
        
        
            
<span class=" default">这个个B大同小异，就是多了个content，这个content就是D处理完成之后返回的那个dict。</span>

        
        
    </p>
    





<h3 id=ac479074-ccd4-4d53-9f62-19e4e1b3022b>
        
            
<span class=" bold default">F. 主流程</span>

        
    </h3>
    





<p>
        
        
            
<span class=" default">函数都写好了之后把主流程写到主体结构中：</span>

        
        
    </p>
    





<pre><code class=language-python>if __name__ == &#34;__main__&#34;:
    token  = input(&#34;token?&#34;)         #用户输入token
    url = input(&#34;request url?&#34;)  #用户输入请求地址

    for i in range(0,1000):         #因为要让下面的部分循环，所以就循环1000次
        tname = input(&#34;task name / path?&#34;) #输入任务名，其实也是路径
        g = listgetter(token, url)
        t = tailor(g)
        a = taskadder(t, tname)
        r = taskputter(a, token, url)</code></pre>
    





<p>
        
        
            
<span class=" default">完成。</span>

        
        
    </p>
    





    </div>
    <div class="footer">
    <p>Created by <a href="https://github.com/imyangmo/notionpaper">NotionPaper</a>, a tool that helps you use Notion like a CMS. </p>
    <p>This site uses <a href="https://simplecss.org/">Simple.css</a></p>
</div>

</div>
</body>
</html>