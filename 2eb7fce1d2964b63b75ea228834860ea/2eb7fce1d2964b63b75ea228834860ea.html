<!DOCTYPE html>
<html>
<head>
    <meta charset='utf-8'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <title>如何一步步检测你的服务器是否被墙（防火墙机制猜测） - PRELUDE</title>
    <meta name='viewport' content='width=device-width, initial-scale=1'>
    <link rel='stylesheet' type='text/css' media='screen' href='../style/basic_styles.css'>
    <link rel="stylesheet" href="https://unpkg.com/simpledotcss/simple.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.5.0/highlight.min.js"></script>
    <script>hljs.highlightAll();</script>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src=https://www.googletagmanager.com/gtag/js?id=UA-92314993-3></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'UA-92314993-3');
    </script>
    <script>
        const page_object = {"contents": [{"children": null, "contents": [{"id": "992546bd-d05f-4afa-a5d1-46e53a31eefb", "level": 1, "text": "\u5199\u5728\u7f51\u7edc\u5b89\u5168\u5468\uff1a\u9632\u706b\u5899\u673a\u5236\u731c\u6d4b"}, {"id": "9bc731e8-df7a-4694-8969-588befd6a2db", "level": 2, "text": "\u7ecf\u9a8c"}, {"id": "fdefee86-bc4c-487a-b694-7ed507eaf5b3", "level": 2, "text": "\u770b\u6cd5"}, {"id": "9ae0829d-887d-430d-a99f-8b98ea61de30", "level": 1, "text": "\u96f6\u3001\u6b63\u6587"}, {"id": "20abdfaf-b238-4574-a512-2d10a0e1a748", "level": 1, "text": "\u4e00\u3001\u6392\u9664DNS\u6c61\u67d3"}, {"id": "606306ef-1b69-4919-a0ae-03cd65882e39", "level": 1, "text": "\u4e8c\u3001Ping\u68c0\u6d4b"}, {"id": "4859bdaf-dccc-4f19-bc81-d37e1b4e0566", "level": 1, "text": "\u4e09\u3001tcp\u8fde\u901a\u6027\u68c0\u6d4b"}, {"id": "e295ae4f-1095-48cb-a984-0138bd22080f", "level": 1, "text": "\u56db\u3001udp\u8fde\u901a\u6027\u68c0\u6d4b"}], "type": "table_of_contents"}, {"children": null, "id": "992546bd-d05f-4afa-a5d1-46e53a31eefb", "text": [{"annotations": " bold", "color": "default", "content": "\u5199\u5728\u7f51\u7edc\u5b89\u5168\u5468\uff1a\u9632\u706b\u5899\u673a\u5236\u731c\u6d4b", "link": null, "type": "text"}], "type": "heading_1"}, {"children": null, "text": [{"annotations": " bold", "color": "default", "content": "Sept.18.2019\u66f4\u65b0: ", "link": null, "type": "text"}, {"annotations": "", "color": "default", "content": "\u8fd9\u6bb5\u4e0d\u8ba8\u8bba\u6280\u672f\u7ec6\u8282\uff0c\u53ea\u662f\u8bf4\u4e00\u4e9b\u6211\u7684\u60f3\u6cd5\u3002", "link": null, "type": "text"}], "type": "paragraph"}, {"children": null, "id": "9bc731e8-df7a-4694-8969-588befd6a2db", "text": [{"annotations": " bold", "color": "default", "content": "\u7ecf\u9a8c", "link": null, "type": "text"}], "type": "heading_2"}, {"children": null, "text": [{"annotations": "", "color": "default", "content": "\u6bcf\u9694\u4e00\u6bb5\u65f6\u95f4\u5c31\u4f1a\u65b0\u51fa\u4e00\u79cd\u79d1\u5b66\u4e0a\u7f51\u65b9\u5f0f\uff0c\u4f8b\u5982\u521a\u5f00\u59cb\u7684l2tp vpn\uff0c\u5230ss\uff0c\u5230\u540e\u6765\u7684ssr\uff0cv2ray\u7b49\u7b49\uff0c\u6ca1\u6709\u4e00\u79cd\u65b9\u5f0f\u662f\u80fd\u591f\u4fdd\u8bc1\u5b8c\u5168\u8eb2\u8fc7\u68c0\u6d4b\u7684\u3002\u53ea\u8981\u4f60\u7684\u7f51\u7edc\u4f20\u8f93\u662f\u516c\u7f51\uff0c\u5c31\u5fc5\u7136\u7ecf\u8fc7\u9632\u706b\u5899\uff0c\u90a3\u4e48\u5c31\u5fc5\u7136\u4f1a\u88ab\u68c0\u6d4b\u3002", "link": null, "type": "text"}], "type": "paragraph"}, {"children": null, "text": [{"annotations": "", "color": "default", "content": "\u5b9e\u8df5\u8bc1\u660e\uff0c\u5728\u516c\u7f51\u73af\u5883\u4e0b\u7684", "link": null, "type": "text"}, {"annotations": " bold", "color": "default", "content": "\u4efb\u4f55\u65b9\u6cd5", "link": null, "type": "text"}, {"annotations": "", "color": "default", "content": "\u5b9e\u9645\u4e0a\u90fd\u662f\u4f1a\u88ab\u63a2\u6d4b\u5230\uff0c\u8fd1\u4e24\u5e74\u6bcf\u6b21\u4e34\u8fd1\u91cd\u5927\u65e5\u671f\u90fd\u4f1a\u53d1\u751f\u5927\u89c4\u6a21ban ip\u7684\u60c5\u51b5\u8db3\u591f\u8bf4\u660e\u4e86\u9632\u706b\u5899\u5df2\u7ecf\u6709\u4e86\u8db3\u591f\u7684\u63a2\u6d4b\u80fd\u529b\uff0c\u53ea\u4e0d\u8fc7\u770b\u9632\u706b\u5899\u60f3\u4e0d\u60f3\u7ba1\u7f62\u4e86\u3002", "link": null, "type": "text"}, {"annotations": " bold", "color": "default", "content": "\u65e0\u8bba", "link": null, "type": "text"}, {"annotations": "", "color": "default", "content": "\u662f\u7528\u7684\u4ec0\u4e48\u52a0\u5bc6\u65b9\u5f0f\u3001\u7aef\u53e3\u53f7\u3001ip\u6bb5\u3001\u662f\u5426ssh\u76f4\u8fde\u3001\u662f\u5426\u67b6\u8bbe\u4e86\u4eba\u755c\u65e0\u5bb3\u7684\u7f51\u7ad9 \u90fd\u6ca1\u6709\u6240\u8c13\u3002\u5373\u4fbf\u662f\u4f7f\u7528\u4e86v2ray+\u4f7f\u7528cloudflare cdn\u5957ws\u7684\u65b9\u6cd5\u3002", "link": null, "type": "text"}], "type": "paragraph"}, {"children": null, "text": [{"annotations": "", "color": "default", "content": "\u8fd9\u4e2a\u5c31\u8ddf\u77e5\u4e4e\u4e0a\u770b\u5230\u8fc7\u7684\u4e00\u7bc7\u6587\u7ae0\u9053\u7406\u662f\u4e00\u6837\uff0c\u5047\u5982\u6211\u662fgfw\uff0c\u6211\u5e76\u4e0d\u9700\u8981\u7834\u89e3\u4f60\u7684\u52a0\u5bc6\u534f\u8bae\u77e5\u9053\u4f60\u4f20\u8f93\u4e86\u4e9b\u4ec0\u4e48\u5185\u5bb9\uff0c\u6211\u53ea\u77e5\u9053\u5927\u9646\u6709\u5927\u91cf\u52a0\u5bc6\u8fde\u63a5\u94fe\u63a5\u5230\u5883\u5916\u67d0\u4e00ip\u6216\u4e3b\u673a\uff0c\u800c\u4e14\u6d41\u91cf\u8f83\u5927\uff0c\u5219\u6211\u6709\u7406\u7531\u731c\u6d4b\u4f60\u662f\u5728\u505a\u4ec0\u4e48\u3002", "link": null, "type": "text"}], "type": "paragraph"}, {"children": null, "text": [{"annotations": "", "color": "default", "content": "\u6839\u636e\u4ee5\u5f80\u7684\u7ecf\u9a8c\uff0c\u5c01\u9501\u7684\u4e25\u91cd\u7a0b\u5ea6\u5982\u4e0b\uff1a", "link": null, "type": "text"}], "type": "paragraph"}, {"children": null, "text": [{"annotations": "", "color": "default", "content": "1. \u5355\u534f\u8bae + \u5355\u7aef\u53e3\u53f7 \u5c01\u9501\uff1a\u5982\u4f7f\u7528\u4e86tcp 3000\u7aef\u53e3\u8fdb\u884c\u5bcc\u5f3a\uff0c\u90a3\u4e48\u53ea\u5c01tcp 3000\u3002\u5176\u4ed6\u7aef\u53e3\u4e0d\u53d7\u5f71\u54cd\uff0c\u5176\u75c7\u72b6\u4e3atcp 3000\u65e0\u6cd5\u901a\u4fe1\uff0c\u5176\u4ed6\u6b63\u5e38\u3002\u5b9e\u9645\u4e0a\u7531\u4e8etcp\u901a\u4fe1\u7684\u65b9\u5f0f\uff0ctcp\u5c01\u7981\u7684\u65b9\u5f0f\u4e5f\u5f88\u591a\u6837\uff0c\u8fd9\u91cc\u5c31\u4e0d\u7ec6\u8bf4\u4e86\u3002", "link": null, "type": "text"}], "type": "paragraph"}, {"children": null, "text": [{"annotations": "", "color": "default", "content": "2. \u5355\u534f\u8bae \u5c01\u9501\uff1atcp\u76f4\u63a5\u5168\u90e8\u65e0\u6cd5\u901a\u4fe1\uff0c\u6b64\u65f6icmp(ping)\u6216\u8005udp\u901a\u4fe1\u6b63\u5e38\u3002", "link": null, "type": "text"}], "type": "paragraph"}, {"children": null, "text": [{"annotations": "", "color": "default", "content": "3. ip\u5c01\u9501\uff1a\u65e0\u6cd5\u548c\u8be5ip\u8fdb\u884c\u901a\u4fe1\u3002", "link": null, "type": "text"}], "type": "paragraph"}, {"children": null, "text": [{"annotations": "", "color": "default", "content": "4. \u57df\u540d\u6c61\u67d3\uff1a\u57df\u540d\u88ab\u6c61\u67d3\uff0c\u4e0b\u9762\u7684\u79cd\u7c7b\u5f88\u591a\uff0c\u4f8b\u5982\u65e0\u6cd5\u89e3\u6790\uff08\u8fd4\u56de\u6295\u6bd2ip\uff09\u3002", "link": null, "type": "text"}], "type": "paragraph"}, {"children": null, "text": [{"annotations": "", "color": "default", "content": "\u9632\u706b\u5899\u4e3a\u53cc\u5411\u9632\u706b\u5899\uff0c\u56e0\u4e3a\u901a\u8fc7traceroute\u53ef\u4ee5\u89c2\u5bdf\u5230\u4e24\u79cd\u60c5\u51b5\uff0c\u4e00\u79cd\u662f\u6d41\u91cf\u65e0\u6cd5\u51fa\u5883\uff0c\u4e00\u79cd\u662f\u6d41\u91cf\u80fd\u591f\u51fa\u5883\u4f46\u662f\u65e0\u6cd5\u5165\u5883\u3002", "link": null, "type": "text"}], "type": "paragraph"}, {"children": null, "id": "fdefee86-bc4c-487a-b694-7ed507eaf5b3", "text": [{"annotations": " bold", "color": "default", "content": "\u770b\u6cd5", "link": null, "type": "text"}], "type": "heading_2"}, {"children": null, "text": [{"annotations": "", "color": "default", "content": "\u8fd8\u662f\u90a3\u53e5\u8bdd\uff0c\u5176\u5b9e\u53ea\u8981\u4f60\u4eba\u5728\u5927\u9646\uff0c\u4f60\u65e0\u8bba\u505a\u4ec0\u4e48\u90fd\u662f\u8001\u5927\u54e5\u662f\u4e00\u76f4\u90fd\u662f\u77e5\u9053\u7684\u3002\u6709\u4eba\u8ba4\u4e3a\u6697\u7f51\u8db3\u591f\u5b89\u5168\uff0c\u4f46\u662f\u5b9e\u9645\u4e0a\u5e76\u4e0d\u662f\uff0c\u56e0\u4e3a\u6211\u4eb2\u773c\u89c1\u8fc7\u3002\u5b9e\u9645\u4e0a\u5982\u679c\u4f60\u770b\u8fc7telegram\u7684\u534f\u8bae\uff0ctg\u5b9e\u9645\u4e0a\u4e5f\u5e76\u4e0d\u5b89\u5168\u3002\u4e13\u7ebf\u7f51\u7edc\u53ef\u80fd\u4f1a\u4e0d\u591f\u90a3\u4e48\u5b89\u5168\uff0c\u4f46\u662f\u516c\u7f51\u5fc5\u5b9a\u4e0d\u5b89\u5168\u3002", "link": null, "type": "text"}], "type": "paragraph"}, {"children": null, "id": "9ae0829d-887d-430d-a99f-8b98ea61de30", "text": [{"annotations": "", "color": "default", "content": "\u96f6\u3001", "link": null, "type": "text"}, {"annotations": " bold", "color": "default", "content": "\u6b63\u6587", "link": null, "type": "text"}], "type": "heading_1"}, {"children": null, "text": [{"annotations": "", "color": "default", "content": "\u7531\u4e8e\u5728\u4f60\u5230\u4f60\u7684\u670d\u52a1\u5668\u95f4\u6709\u5927\u5bb6\u90fd\u61c2\u7684\u4e0d\u7a33\u5b9a\u7684\u56e0\u7d20\u5b58\u5728\uff0c\u5728\u7231\u56fd\u4e0a\u7f51\u8f6f\u4ef6\u65e0\u6cd5\u94fe\u63a5\u65f6\u9700\u8981\u5224\u65ad\u662f\u5426\u662f\u8fd9\u4e2a\u4e0d\u7a33\u5b9a\u56e0\u7d20\u9020\u6210\u7684\u3002\u8bb0\u5f55\u4e00\u4e0b\u6211\u5e73\u5e38\u7684\u5224\u65ad\u65b9\u6cd5\u3002", "link": null, "type": "text"}], "type": "paragraph"}, {"children": null, "text": [{"annotations": "", "color": "default", "content": "\u5f53\u7136\u524d\u63d0\u662f\u670d\u52a1\u5668\u7aef\u548c\u5ba2\u6237\u7aef\u5df2\u7ecf\u914d\u7f6e\u6b63\u786e\u3002", "link": null, "type": "text"}], "type": "paragraph"}, {"children": null, "id": "20abdfaf-b238-4574-a512-2d10a0e1a748", "text": [{"annotations": "", "color": "default", "content": "\u4e00\u3001", "link": null, "type": "text"}, {"annotations": " bold", "color": "default", "content": "\u6392\u9664DNS\u6c61\u67d3", "link": null, "type": "text"}], "type": "heading_1"}, {"children": null, "text": [{"annotations": "", "color": "default", "content": "\u4e4b\u524d\u9047\u5230\u8fc7\u7684\u4e00\u4e2a\u60c5\u51b5\uff0c\u7ebf\u8def\u662f\u901a\u7684\uff0c\u4f46\u662f\u5c31\u662f\u8bbf\u95ee\u4e0d\u4e0a\uff0c\u6700\u540e\u53d1\u73b0\u662f\u672c\u673a\u4f7f\u7528\u7684DNS\u88ab\u6c61\u67d3\u3002", "link": null, "type": "text"}], "type": "paragraph"}, {"children": null, "text": [{"annotations": "", "color": "default", "content": "\u867d\u7136\u73b0\u5728\u6709\u4e9b\u7231\u56fd\u4e0a\u7f51\u5de5\u5177\u5df2\u7ecf\u4e0d\u518d\u4f7f\u7528\u5ba2\u6237\u7aefDNS\u8fdb\u884c\u57df\u540d\u89e3\u6790\uff0c\u4f46\u662f\u67d0\u4e9b\u7279\u6b8a\u60c5\u51b5\u4e0b\u5229\u7528\u5ba2\u6237\u7aefDNS\u89e3\u6790\u7684\u65f6\u5019\u5c31\u9700\u8981\u6392\u67e5\u8fd9\u4e2a\u95ee\u9898\u3002", "link": null, "type": "text"}], "type": "paragraph"}, {"children": null, "text": [{"annotations": "", "color": "default", "content": "\u5728\u6211\u76ee\u524d\u9047\u5230\u60c5\u51b5\u4e0b\u770b\u6765\uff0c\u5728\u6b64\u60c5\u51b5\u4e0b\u4f7f\u7528nslookup\u6bcf\u6b21\u90fd\u4f1a\u8fd4\u56de\u4e0d\u540c\u7684\u5783\u573eip\uff0c\u5e76\u4e14\u4e0d\u50cf\u6b63\u5e38\u60c5\u51b5\u4e0b\u90a3\u6837\u7684\u8fd4\u56de\u770b\u8d77\u6765\u5c31\u4e0d\u4e00\u6837\u7684ip\u3002", "link": null, "type": "text"}], "type": "paragraph"}, {"children": null, "type": "image", "url": "09e5d890-fdb3-11ec-a932-b060885df61e"}, {"children": null, "text": [{"annotations": "", "color": "default", "content": "\u5982\u679c\u4f60\u62ff\u8fd9\u4e2aip\u53bb\u67e5\uff0c\u5c31\u4f1a\u53d1\u73b0\u5c31\u662f\u4e2a\u5783\u573eip\u3002", "link": null, "type": "text"}], "type": "paragraph"}, {"children": null, "type": "image", "url": "0a963696-fdb3-11ec-a0ae-b060885df61e"}, {"children": null, "text": [{"annotations": "", "color": "default", "content": "\u4f46\u662f\u5982\u679c\u7528\u65e0\u6c61\u67d3\u7684dns\u67e5\u8be2\u5219\u662f\u8fd4\u56de\u7684\u6b63\u5e38\u7ed3\u679c\u3002\u4f8b\u5982\u6211\u8fd9\u91cc\u7528\u7684\u662f\u4e2d\u79d1\u5927\u7684dns\u3002", "link": null, "type": "text"}], "type": "paragraph"}, {"children": null, "type": "image", "url": "0b341e26-fdb3-11ec-864f-b060885df61e"}, {"children": null, "text": [{"annotations": "", "color": "default", "content": "\u5927\u5bb6\u4e5f\u53ef\u4ee5\u81ea\u884c\u67e5\u4e00\u4e0b\u8fd9\u4e2aip\u3002", "link": null, "type": "text"}], "type": "paragraph"}, {"children": null, "text": [{"annotations": "", "color": "default", "content": "\u7531\u4e8edns\u67e5\u8be2\u7684\u7279\u6027\uff0c\u5883\u5916\u7684dns\u670d\u52a1\u57fa\u672c\u4e0a\u90fd\u662f\u5c5e\u4e8e", "link": null, "type": "text"}, {"annotations": " bold", "color": "default", "content": "\u4e0d\u53ef\u7528", "link": null, "type": "text"}, {"annotations": "", "color": "default", "content": "\u7684\u72b6\u6001\u3002\u6240\u4ee5\u4e0d\u8981\u4ee5\u4e3a\u628adns\u6539\u62108.8.8.8\u5c31\u4e07\u4e8b\u5927\u5409\u4e86\u3002", "link": null, "type": "text"}], "type": "paragraph"}, {"children": null, "id": "606306ef-1b69-4919-a0ae-03cd65882e39", "text": [{"annotations": "", "color": "default", "content": "\u4e8c\u3001", "link": null, "type": "text"}, {"annotations": " bold", "color": "default", "content": "Ping\u68c0\u6d4b", "link": null, "type": "text"}], "type": "heading_1"}, {"children": null, "text": [{"annotations": "", "color": "default", "content": "\u8fd9\u662f\u6bd4\u8f83\u539f\u59cb\uff0c\u5728\u4e00\u5b9a\u60c5\u51b5\u4e0b\u6709\u6548\u7684\u65b9\u6cd5\u3002", "link": null, "type": "text"}], "type": "paragraph"}, {"children": null, "text": [{"annotations": "", "color": "default", "content": "\u524d\u63d0\u662f\u670d\u52a1\u5668\u7684\u9632\u706b\u5899\u5141\u8bb8\u4e86icmp\uff0c\u4e5f\u5c31\u662f\u4e0d\u7981ping\u3002\u4e00\u822c\u5178\u578b\u7684\u670d\u52a1\u5668", "link": null, "type": "text"}, {"annotations": " bold", "color": "default", "content": "\u7545\u901a", "link": null, "type": "text"}, {"annotations": "", "color": "default", "content": "\u7684ping\u60c5\u51b5\u5982\u4e0b\uff1a", "link": null, "type": "text"}], "type": "paragraph"}, {"children": null, "type": "image", "url": "0be7ac0b-fdb3-11ec-8ff6-b060885df61e"}, {"children": null, "text": [{"annotations": "", "color": "default", "content": "\u4e00\u822c\u5178\u578b\u7684\u670d\u52a1\u5668", "link": null, "type": "text"}, {"annotations": " bold", "color": "default", "content": "\u4e0d\u7545\u901a", "link": null, "type": "text"}, {"annotations": "", "color": "default", "content": "\u7684ping\u60c5\u51b5\u5982\u4e0b\uff1a", "link": null, "type": "text"}], "type": "paragraph"}, {"children": null, "type": "image", "url": "0c803cba-fdb3-11ec-949e-b060885df61e"}, {"children": null, "text": [{"annotations": "", "color": "default", "content": "\u5982\u679c\u53ef\u4ee5\u786e\u5b9a\u4e4b\u524d\u670d\u52a1\u5668\u662f\u53efping\u901a\u7684\u4f46\u662f\u67d0\u5929\u7a81\u7136ping\u4e0d\u901a\u4e86\uff0c\u53ef\u4ee5\u521d\u6b65\u786e\u5b9a\u4f60\u7684\u670d\u52a1\u5668ip\u88ab\u7167\u987e\u4e86\u3002", "link": null, "type": "text"}], "type": "paragraph"}, {"children": null, "id": "4859bdaf-dccc-4f19-bc81-d37e1b4e0566", "text": [{"annotations": "", "color": "default", "content": "\u4e09\u3001", "link": null, "type": "text"}, {"annotations": " bold", "color": "default", "content": "tcp\u8fde\u901a\u6027\u68c0\u6d4b", "link": null, "type": "text"}], "type": "heading_1"}, {"children": null, "text": [{"annotations": "", "color": "default", "content": "\u76ee\u524d\u53ef\u4ee5\u89c2\u5bdf\u5230\u7684\u73b0\u8c61\u662f\uff0c\u4f1a\u6709tcp\u963b\u65ad\u7684\u5b58\u5728\uff0c\u4e5f\u5c31\u662f\u8bf4icmp\u662f\u901a\u7684\uff0cudp\u4e5f\u662f\u901a\u7684\uff0c\u53ea\u662ftcp\u662f\u963b\u65ad\u7684\u3002\u90a3\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0bping\u901a\u4e5f\u4e0d\u80fd\u4ee3\u8868\u4ec0\u4e48\u4e86\u3002", "link": null, "type": "text"}], "type": "paragraph"}, {"children": null, "text": [{"annotations": "", "color": "default", "content": "\u6240\u4ee5\u6b64\u65f6\u9700\u8981\u7528\u5230nmap\u8fd9\u4e2a\u5de5\u5177\u3002\u5176\u5b9e\u7528tcping\u4e5f\u662f\u4e00\u6837\u7684\uff0c\u8003\u8651\u5230\u4e4b\u540e\u8fd8\u9700\u8981\u505audp\u8fde\u901a\u6027\u68c0\u6d4b\uff0c\u90a3\u5c31\u5e72\u8106nmap\u4e00\u6b65\u5230\u4f4d\u5427\u3002", "link": null, "type": "text"}], "type": "paragraph"}, {"children": null, "text": [{"annotations": "", "color": "default", "content": "\u57fa\u672c\u8bed\u6cd5\uff1a", "link": null, "type": "text"}], "type": "paragraph"}, {"children": null, "contents": "nmap -sS -p 80 www.google.com\n\n-sS \u4f7f\u7528tcp\n-sU \u4f7f\u7528udp\n-p 80 \u6307\u5b9a\u7aef\u53e3", "language": "language-bash", "type": "code"}, {"children": null, "text": [{"annotations": "", "color": "default", "content": "\u7545\u901a\u65f6\u7ed3\u679c\u5982\u4e0b\uff1a", "link": null, "type": "text"}], "type": "paragraph"}, {"children": null, "type": "image", "url": "0d0b442c-fdb3-11ec-8c64-b060885df61e"}, {"children": null, "text": [{"annotations": "", "color": "default", "content": "\u5426\u5219\u5c31\u4f1a\u5982\u4e0b\uff0c\u4e5f\u5c31\u662f\u68c0\u6d4b\u4e0d\u5230\u670d\u52a1\u5668\u5f00\u673a\u7684\uff1a", "link": null, "type": "text"}], "type": "paragraph"}, {"children": null, "type": "image", "url": "0dae2850-fdb3-11ec-a6a6-b060885df61e"}, {"children": null, "text": [{"annotations": "", "color": "default", "content": "\u5f53\u7136\u4e5f\u6709\u53ef\u80fd\u68c0\u6d4b\u5230STATE\u662f", "link": null, "type": "text"}, {"annotations": " code", "color": "default", "content": "filtered", "link": null, "type": "text"}, {"annotations": "", "color": "default", "content": "\u6216\u8005", "link": null, "type": "text"}, {"annotations": " code", "color": "default", "content": "closed", "link": null, "type": "text"}, {"annotations": "", "color": "default", "content": "\uff0c\u4e00\u822c\u8fd9\u4e24\u79cd\u72b6\u6001\u662f\u5355\u534f\u8bae\u963b\u65ad\u9020\u6210\u7684\uff0c\u6bd4\u5982\u53ea\u963b\u65ad\u4e86tcp\u6216\u8005udp\u3002\u8fd9\u91cc\u627e\u4e0d\u5230\u56fe\u5c31\u4e0d\u653e\u4e86\u3002", "link": null, "type": "text"}], "type": "paragraph"}, {"children": null, "text": [{"annotations": "", "color": "default", "content": "\u5efa\u8bae\u5728\u672c\u5730tcp\u68c0\u6d4b\u662f\u4e0d\u901a\u7684\u4e4b\u540e\uff0c\u53bb", "link": null, "type": "text"}, {"annotations": "", "color": "default", "content": "\u4e00\u4e9b\u5883\u5916\u7684tcp\u68c0\u6d4b\u7f51\u7ad9", "link": "https://www.yougetsignal.com/tools/open-ports/", "type": "text"}, {"annotations": "", "color": "default", "content": "\u8bd5\u4e00\u4e0b\u662f\u4e0d\u662f\u901a\u7684\uff0c\u7528\u6765\u6392\u9664\u670d\u52a1\u5668\u672c\u8eab\u7684\u95ee\u9898\u3002", "link": null, "type": "text"}], "type": "paragraph"}, {"children": null, "id": "e295ae4f-1095-48cb-a984-0138bd22080f", "text": [{"annotations": "", "color": "default", "content": "\u56db\u3001", "link": null, "type": "text"}, {"annotations": " bold", "color": "default", "content": "udp\u8fde\u901a\u6027\u68c0\u6d4b", "link": null, "type": "text"}], "type": "heading_1"}, {"children": null, "text": [{"annotations": "", "color": "default", "content": "\u8fd9\u79cd\u68c0\u6d4b\u662f\u9488\u5bf9\u4f7f\u7528\u7684\u7231\u56fd\u5de5\u5177\u7528\u7684\u662fudp\u65b9\u5f0f\u7684\uff0c\u56e0\u4e3audp\u8fde\u901a\u68c0\u6d4b\u5de5\u5177\u4e0d\u50cftcping\u90a3\u6837\u597d\u5b9e\u73b0\uff0c\u6240\u4ee5\u8fd8\u662f\u7528nmap\u6765\u68c0\u6d4b\u3002", "link": null, "type": "text"}], "type": "paragraph"}], "cover": null, "create_date": "2019-07-30", "create_time": "", "ga": "UA-92314993-3", "page_title": "\u5982\u4f55\u4e00\u6b65\u6b65\u68c0\u6d4b\u4f60\u7684\u670d\u52a1\u5668\u662f\u5426\u88ab\u5899\uff08\u9632\u706b\u5899\u673a\u5236\u731c\u6d4b\uff09", "site_name": "PRELUDE"}
        console.log(page_object)
    </script>
</head>
<body>


<!-- header area -->

    <div style="position: absolute; height: 400px;width: 100%;z-index: 0;display: flex; justify-content: center;">
  

        <div>
            
            <div class="header-article">
    <p><a href="../index.html">PRELUDE</a></p>
</div>
            
            <h1 class="page-title">如何一步步检测你的服务器是否被墙（防火墙机制猜测）</h1>
            <i class="page-title">Create At: 2019-07-30 </i>
        </div>
    </div>


<!-- body area -->
    <div class="container" style="padding-top: 450px">
    <div>
        
        













<a href=#992546bd-d05f-4afa-a5d1-46e53a31eefb class=toc_level_1>写在网络安全周：防火墙机制猜测</a>

<a href=#9bc731e8-df7a-4694-8969-588befd6a2db class=toc_level_2>经验</a>

<a href=#fdefee86-bc4c-487a-b694-7ed507eaf5b3 class=toc_level_2>看法</a>

<a href=#9ae0829d-887d-430d-a99f-8b98ea61de30 class=toc_level_1>零、正文</a>

<a href=#20abdfaf-b238-4574-a512-2d10a0e1a748 class=toc_level_1>一、排除DNS污染</a>

<a href=#606306ef-1b69-4919-a0ae-03cd65882e39 class=toc_level_1>二、Ping检测</a>

<a href=#4859bdaf-dccc-4f19-bc81-d37e1b4e0566 class=toc_level_1>三、tcp连通性检测</a>

<a href=#e295ae4f-1095-48cb-a984-0138bd22080f class=toc_level_1>四、udp连通性检测</a>

    





<h2 id=992546bd-d05f-4afa-a5d1-46e53a31eefb>
        
            
<span class=" bold default">写在网络安全周：防火墙机制猜测</span>

        
    </h2>
    





<p>
        
        
            
<span class=" bold default">Sept.18.2019更新: </span>

        
        
        
            
<span class=" default">这段不讨论技术细节，只是说一些我的想法。</span>

        
        
    </p>
    





<h3 id=9bc731e8-df7a-4694-8969-588befd6a2db>
        
            
<span class=" bold default">经验</span>

        
    </h3>
    





<p>
        
        
            
<span class=" default">每隔一段时间就会新出一种科学上网方式，例如刚开始的l2tp vpn，到ss，到后来的ssr，v2ray等等，没有一种方式是能够保证完全躲过检测的。只要你的网络传输是公网，就必然经过防火墙，那么就必然会被检测。</span>

        
        
    </p>
    





<p>
        
        
            
<span class=" default">实践证明，在公网环境下的</span>

        
        
        
            
<span class=" bold default">任何方法</span>

        
        
        
            
<span class=" default">实际上都是会被探测到，近两年每次临近重大日期都会发生大规模ban ip的情况足够说明了防火墙已经有了足够的探测能力，只不过看防火墙想不想管罢了。</span>

        
        
        
            
<span class=" bold default">无论</span>

        
        
        
            
<span class=" default">是用的什么加密方式、端口号、ip段、是否ssh直连、是否架设了人畜无害的网站 都没有所谓。即便是使用了v2ray+使用cloudflare cdn套ws的方法。</span>

        
        
    </p>
    





<p>
        
        
            
<span class=" default">这个就跟知乎上看到过的一篇文章道理是一样，假如我是gfw，我并不需要破解你的加密协议知道你传输了些什么内容，我只知道大陆有大量加密连接链接到境外某一ip或主机，而且流量较大，则我有理由猜测你是在做什么。</span>

        
        
    </p>
    





<p>
        
        
            
<span class=" default">根据以往的经验，封锁的严重程度如下：</span>

        
        
    </p>
    





<p>
        
        
            
<span class=" default">1. 单协议 + 单端口号 封锁：如使用了tcp 3000端口进行富强，那么只封tcp 3000。其他端口不受影响，其症状为tcp 3000无法通信，其他正常。实际上由于tcp通信的方式，tcp封禁的方式也很多样，这里就不细说了。</span>

        
        
    </p>
    





<p>
        
        
            
<span class=" default">2. 单协议 封锁：tcp直接全部无法通信，此时icmp(ping)或者udp通信正常。</span>

        
        
    </p>
    





<p>
        
        
            
<span class=" default">3. ip封锁：无法和该ip进行通信。</span>

        
        
    </p>
    





<p>
        
        
            
<span class=" default">4. 域名污染：域名被污染，下面的种类很多，例如无法解析（返回投毒ip）。</span>

        
        
    </p>
    





<p>
        
        
            
<span class=" default">防火墙为双向防火墙，因为通过traceroute可以观察到两种情况，一种是流量无法出境，一种是流量能够出境但是无法入境。</span>

        
        
    </p>
    





<h3 id=fdefee86-bc4c-487a-b694-7ed507eaf5b3>
        
            
<span class=" bold default">看法</span>

        
    </h3>
    





<p>
        
        
            
<span class=" default">还是那句话，其实只要你人在大陆，你无论做什么都是老大哥是一直都是知道的。有人认为暗网足够安全，但是实际上并不是，因为我亲眼见过。实际上如果你看过telegram的协议，tg实际上也并不安全。专线网络可能会不够那么安全，但是公网必定不安全。</span>

        
        
    </p>
    





<h2 id=9ae0829d-887d-430d-a99f-8b98ea61de30>
        
            
<span class=" default">零、</span>

        
            
<span class=" bold default">正文</span>

        
    </h2>
    





<p>
        
        
            
<span class=" default">由于在你到你的服务器间有大家都懂的不稳定的因素存在，在爱国上网软件无法链接时需要判断是否是这个不稳定因素造成的。记录一下我平常的判断方法。</span>

        
        
    </p>
    





<p>
        
        
            
<span class=" default">当然前提是服务器端和客户端已经配置正确。</span>

        
        
    </p>
    





<h2 id=20abdfaf-b238-4574-a512-2d10a0e1a748>
        
            
<span class=" default">一、</span>

        
            
<span class=" bold default">排除DNS污染</span>

        
    </h2>
    





<p>
        
        
            
<span class=" default">之前遇到过的一个情况，线路是通的，但是就是访问不上，最后发现是本机使用的DNS被污染。</span>

        
        
    </p>
    





<p>
        
        
            
<span class=" default">虽然现在有些爱国上网工具已经不再使用客户端DNS进行域名解析，但是某些特殊情况下利用客户端DNS解析的时候就需要排查这个问题。</span>

        
        
    </p>
    





<p>
        
        
            
<span class=" default">在我目前遇到情况下看来，在此情况下使用nslookup每次都会返回不同的垃圾ip，并且不像正常情况下那样的返回看起来就不一样的ip。</span>

        
        
    </p>
    





<img src=./09e5d890-fdb3-11ec-a932-b060885df61e></img>
    





<p>
        
        
            
<span class=" default">如果你拿这个ip去查，就会发现就是个垃圾ip。</span>

        
        
    </p>
    





<img src=./0a963696-fdb3-11ec-a0ae-b060885df61e></img>
    





<p>
        
        
            
<span class=" default">但是如果用无污染的dns查询则是返回的正常结果。例如我这里用的是中科大的dns。</span>

        
        
    </p>
    





<img src=./0b341e26-fdb3-11ec-864f-b060885df61e></img>
    





<p>
        
        
            
<span class=" default">大家也可以自行查一下这个ip。</span>

        
        
    </p>
    





<p>
        
        
            
<span class=" default">由于dns查询的特性，境外的dns服务基本上都是属于</span>

        
        
        
            
<span class=" bold default">不可用</span>

        
        
        
            
<span class=" default">的状态。所以不要以为把dns改成8.8.8.8就万事大吉了。</span>

        
        
    </p>
    





<h2 id=606306ef-1b69-4919-a0ae-03cd65882e39>
        
            
<span class=" default">二、</span>

        
            
<span class=" bold default">Ping检测</span>

        
    </h2>
    





<p>
        
        
            
<span class=" default">这是比较原始，在一定情况下有效的方法。</span>

        
        
    </p>
    





<p>
        
        
            
<span class=" default">前提是服务器的防火墙允许了icmp，也就是不禁ping。一般典型的服务器</span>

        
        
        
            
<span class=" bold default">畅通</span>

        
        
        
            
<span class=" default">的ping情况如下：</span>

        
        
    </p>
    





<img src=./0be7ac0b-fdb3-11ec-8ff6-b060885df61e></img>
    





<p>
        
        
            
<span class=" default">一般典型的服务器</span>

        
        
        
            
<span class=" bold default">不畅通</span>

        
        
        
            
<span class=" default">的ping情况如下：</span>

        
        
    </p>
    





<img src=./0c803cba-fdb3-11ec-949e-b060885df61e></img>
    





<p>
        
        
            
<span class=" default">如果可以确定之前服务器是可ping通的但是某天突然ping不通了，可以初步确定你的服务器ip被照顾了。</span>

        
        
    </p>
    





<h2 id=4859bdaf-dccc-4f19-bc81-d37e1b4e0566>
        
            
<span class=" default">三、</span>

        
            
<span class=" bold default">tcp连通性检测</span>

        
    </h2>
    





<p>
        
        
            
<span class=" default">目前可以观察到的现象是，会有tcp阻断的存在，也就是说icmp是通的，udp也是通的，只是tcp是阻断的。那在这种情况下ping通也不能代表什么了。</span>

        
        
    </p>
    





<p>
        
        
            
<span class=" default">所以此时需要用到nmap这个工具。其实用tcping也是一样的，考虑到之后还需要做udp连通性检测，那就干脆nmap一步到位吧。</span>

        
        
    </p>
    





<p>
        
        
            
<span class=" default">基本语法：</span>

        
        
    </p>
    





<pre><code class=language-bash>nmap -sS -p 80 www.google.com

-sS 使用tcp
-sU 使用udp
-p 80 指定端口</code></pre>
    





<p>
        
        
            
<span class=" default">畅通时结果如下：</span>

        
        
    </p>
    





<img src=./0d0b442c-fdb3-11ec-8c64-b060885df61e></img>
    





<p>
        
        
            
<span class=" default">否则就会如下，也就是检测不到服务器开机的：</span>

        
        
    </p>
    





<img src=./0dae2850-fdb3-11ec-a6a6-b060885df61e></img>
    





<p>
        
        
            
<span class=" default">当然也有可能检测到STATE是</span>

        
        
        
            
<span class=" code default">filtered</span>

        
        
        
            
<span class=" default">或者</span>

        
        
        
            
<span class=" code default">closed</span>

        
        
        
            
<span class=" default">，一般这两种状态是单协议阻断造成的，比如只阻断了tcp或者udp。这里找不到图就不放了。</span>

        
        
    </p>
    





<p>
        
        
            
<span class=" default">建议在本地tcp检测是不通的之后，去</span>

        
        
        
            
<a href=https://www.yougetsignal.com/tools/open-ports/ class=" default">一些境外的tcp检测网站</a>

        
        
        
            
<span class=" default">试一下是不是通的，用来排除服务器本身的问题。</span>

        
        
    </p>
    





<h2 id=e295ae4f-1095-48cb-a984-0138bd22080f>
        
            
<span class=" default">四、</span>

        
            
<span class=" bold default">udp连通性检测</span>

        
    </h2>
    





<p>
        
        
            
<span class=" default">这种检测是针对使用的爱国工具用的是udp方式的，因为udp连通检测工具不像tcping那样好实现，所以还是用nmap来检测。</span>

        
        
    </p>
    





    </div>
    <div class="footer">
    <p>Created by <a href="https://github.com/imyangmo/notionpaper">NotionPaper</a>, a tool that helps you use Notion like a CMS. </p>
    <p>This site uses <a href="https://simplecss.org/">Simple.css</a></p>
</div>

</div>
</body>
</html>